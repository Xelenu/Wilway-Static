<!DOCTYPE html>
<html>
<head>
  <title>Wilway</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    ::-webkit-scrollbar {
      width: 1.2vw;
    }
    ::-webkit-scrollbar-track {
      background: black;
    }
    ::-webkit-scrollbar-thumb {
      background: cyan;
      border-radius: 0.6vw;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #00e6e6;
    }
    html {
      scrollbar-width: thin;
      scrollbar-color: cyan black;
    }
    .background {
      position: relative;
      height: 100vh;
      background: linear-gradient(to bottom right, darkblue, darkcyan, darkblue);
      background-size: 200% 200%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      animation: gradientShift 10s ease-in-out infinite;
      overflow: hidden;
    }
    .background.paused {
      animation-play-state: paused;
    }
    .content-iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      z-index: 5;
      display: none;
    }
    .home-container {
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      padding: 2vh 3vw;
      border-radius: 1vh;
      box-shadow: 0 0.2vh 0.4vh rgba(0,0,0,0.2);
      z-index: 6;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 1vh;
    }
    .no-impact .home-container {
      background: rgba(0,139,139,0.8);
    }
    .home-container.hidden {
      display: none;
    }
    .home-container h1 {
      font-size: clamp(2rem, 3vw, 3rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 2px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      margin: 0;
    }
    .no-impact .home-container h1 {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
    }
    .home-container p {
      font-size: clamp(1rem, 1.5vw, 1.2rem);
      color: white;
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      margin: 0;
    }
    .no-impact .home-container p {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
    }
    .bottom-bar {
      position: fixed;
      bottom: 2vh;
      left: 5%;
      width: 90%;
      height: 6vh;
      background: linear-gradient(to bottom right, rgba(0,0,139,0.9), rgba(0,139,139,0.9), rgba(0,0,139,0.9));
      border-radius: 1.5vh;
      box-shadow: 0 0.4vh 0.8vh rgba(0,0,0,0.3);
      z-index: 10;
      overflow: hidden;
      transition: transform 0.3s ease, opacity 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.25rem;
      padding: 0 1vh;
      opacity: 1;
      transform: translateY(0);
    }
    .bottom-bar.hidden {
      opacity: 0;
      transform: translateY(10vh);
    }
    .hover-area {
      position: fixed;
      bottom: 0;
      left: 4%;
      width: 92%;
      height: 8vh;
      background: transparent;
      z-index: 9;
      cursor: default;
      transition: opacity 0.3s ease, transform 0.3s ease;
      opacity: 1;
      transform: translateY(0);
    }
    .hover-area.hidden {
      opacity: 0;
      transform: translateY(10vh);
    }
    .hover-area:hover ~ .bottom-bar,
    .bottom-bar:hover {
      transform: translateY(-1vh);
    }
    .bottom-bar.hidden:hover,
    .hover-area.hidden:hover ~ .bottom-bar {
      transform: translateY(10vh);
    }
    .bottom-bar::before {
      content: '';
      position: absolute;
      top: -0.5vh;
      left: -0.5vh;
      right: -0.5vh;
      bottom: -0.5vh;
      background: linear-gradient(to right, rgba(0,0,139,0.9), rgba(0,139,139,0.9), rgba(0,0,139,0.9));
      z-index: -1;
      border-radius: 2vh;
    }
    .bottom-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to bottom right, rgba(0,0,139,0.9), rgba(0,139,139,0.9), rgba(0,0,139,0.9));
      border-radius: 1.5vh;
      z-index: -1;
    }
    .theme-button {
      width: 10vw;
      height: 4vh;
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1.2rem, 2vw, 1.6rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 2px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      border: none;
      border-radius: 0.8vh;
      cursor: pointer;
      transition: transform 0.2s ease-in-out, border 0.2s ease-in-out, background 0.2s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0.2vh 0.4vh rgba(0,0,0,0.2);
      padding: 0 0.5vh;
      user-select: none;
      text-align: center;
      z-index: 11;
      position: relative;
      overflow: hidden;
    }
    .theme-button.disabled {
      pointer-events: none;
      opacity: 0.5;
    }
    .no-impact .theme-button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(0,139,139,0.8);
    }
    .theme-button.selected {
      background: #00e6e6;
      border: 0.3vh solid white;
      transform: scale(1.1);
    }
    .theme-button:hover {
      transform: scale(1.2);
      border: 0.2vh solid white;
    }
    .theme-button:hover + .theme-button {
      transform: translateX(1vh);
    }
    .theme-button:hover ~ .theme-button:not(:hover) {
      transform: translateX(1vh);
    }
    .theme-button:not(:hover):not(.selected) {
      transform: scale(1);
      border: none;
    }
    .bottom-bar:hover .theme-button {
      transition: transform 0.2s ease-in-out;
    }
    .click-effect {
      position: absolute;
      background: white;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      animation: spread-and-fade 0.5s ease-out forwards;
    }
    .settings-button {
      position: fixed;
      bottom: 3vh;
      left: 3vh;
      width: 5vh;
      height: 5vh;
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1.5rem, 2.5vw, 2rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 12;
    }
    .no-impact .settings-button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(0,139,139,0.8);
    }
    .settings-button:hover {
      transform: scale(1.1);
    }
    .toggle-bar-button {
      position: fixed;
      bottom: 2vh;
      right: 3vh;
      width: 5vh;
      height: 5vh;
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1.5rem, 2.5vw, 2rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 12;
    }
    .no-impact .toggle-bar-button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(0,139,139,0.8);
    }
    .toggle-bar-button:hover {
      transform: scale(1.1);
    }
    .fullscreen-button {
      position: fixed;
      bottom: 2vh;
      right: 8vh;
      width: 5vh;
      height: 5vh;
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1.5rem, 2.5vw, 2rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s ease-in-out, opacity 0.3s ease, transform 0.3s ease;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 12;
      opacity: 1;
      transform: translateY(0);
    }
    .no-impact .fullscreen-button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(0,139,139,0.8);
    }
    .fullscreen-button.hidden {
      opacity: 0;
      transform: translateY(10vh);
    }
    .fullscreen-button:hover {
      transform: scale(1.1);
    }
    .fullscreen-button.hidden:hover {
      transform: translateY(10vh);
    }
    .settings-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 35vw;
      padding: 3vh;
      background: linear-gradient(to bottom right, rgba(0,0,139,0.7), rgba(0,139,139,0.7), rgba(0,0,139,0.7));
      border-radius: 1.5vh;
      box-shadow: 0 0.4vh 1.2vh rgba(0,0,0,0.5);
      z-index: 13;
      display: none;
      flex-direction: column;
      gap: 1.25rem;
      border: 0.2vh solid rgba(0,139,139,0.7);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 1;
      transform: translate(-50%, -50%);
    }
    .settings-panel.hidden {
      opacity: 0;
      transform: translate(-50%, calc(-50% + 10vh));
    }
    .settings-panel button {
      width: 100%;
      height: 5vh;
      background: darkcyan;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1.2rem, 2vw, 1.6rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
      border: none;
      border-radius: 0.6vh;
      cursor: pointer;
      transition: transform 0.2s ease-in-out, border 0.2s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0.2vh 0.4vh rgba veda(0,0,0,0.2);
    }
    .no-impact .settings-panel button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(0,139,139,0.8);
    }
    .settings-panel button:hover {
      transform: scale(1.05);
      border: 0.1vh solid white;
    }
    .settings-panel .close-button {
      background: darkblue;
      font-family: Impact, "Arial Black", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: clamp(1rem, 1.5vw, 1.2rem);
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.5);
    }
    .no-impact .settings-panel .close-button {
      -webkit-text-stroke: clamp(0.05rem, 0.1vw, 0.1rem);
      text-shadow: 0.1rem 0.1rem 0.2rem rgba(0,0,0,0.7);
      background: rgba(75,0,130,0.8);
    }
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(0.5rem);
      -webkit-backdrop-filter: blur(0.5rem);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 100;
      opacity: 1;
      animation: loadingFade linear forwards;
    }
    .progress-container {
      position: relative;
      width: 18vw;
      height: 18vw;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .loading-image {
      width: 15vw;
      height: 15vw;
      border-radius: 50%;
      object-fit: cover;
      z-index: 101;
    }
    .progress-circle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-90deg);
      width: 18vw;
      height: 18vw;
      z-index: 100;
    }
    .progress-circle circle {
      fill: none;
      stroke-width: 1.5vw;
      stroke: url(#gradient);
      stroke-linecap: round;
      stroke-dasharray: 565.48;
      stroke-dashoffset: 565.48;
      animation: progressFill linear forwards;
    }
    @keyframes loadingFade {
      0%, 80% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes progressFill {
      0% { stroke-dashoffset: 565.48; }
      100% { stroke-dashoffset: 0; }
    }
    @keyframes spread-and-fade {
      0% {
        width: 1vh;
        height: 1vh;
        opacity: 0.8;
      }
      100% {
        width: 12vh;
        height: 12vh;
        opacity: 0;
      }
    }
    @keyframes gradientShift {
      0% { background-position: 0% 0%; }
      50% { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }
  </style>
</head>
<body>
  <div class="loading-screen" id="loadingScreen">
    <div class="progress-container">
      <img class="loading-image" src="/images/1.png" alt=".">
      <svg class="progress-circle" viewBox="0 0 200 200">
        <defs>
          <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:darkblue;" />
            <stop offset="100%" style="stop-color:darkcyan;" />
          </linearGradient>
        </defs>
        <circle cx="100" cy="100" r="90" />
      </svg>
    </div>
  </div>
  <div class="background">
    <div class="home-container">
      <h1>This is Wilway.</h1>
      <p>test</p>
    </div>
    <iframe class="content-iframe" id="contentIframe" allowfullscreen></iframe>
  </div>
  <div class="hover-area"></div>
  <div class="bottom-bar">
    <button class="theme-button" onclick="buttonClick(1)">Home</button>
    <button class="theme-button" onclick="buttonClick(2)">Movies</button>
    <button class="theme-button" onclick="buttonClick(3)">3</button>
    <button class="theme-button" onclick="buttonClick(4)">4</button>
    <button class="theme-button" onclick="buttonClick(5)">5</button>
    <button class="theme-button" onclick="buttonClick(6)">6</button>
    <button class="theme-button" onclick="buttonClick(7)">7</button>
    <button class="theme-button" onclick="buttonClick(8)">8</button>
    <button class="theme-button" onclick="buttonClick(9)">9</button>
    <button class="theme-button" onclick="buttonClick(10)">10</button>
  </div>
  <button class="settings-button" onclick="toggleSettingsPanel()">‚öôÔ∏è</button>
  <button class="fullscreen-button" onclick="toggleFullscreen()">‚õ∂</button>
  <button class="toggle-bar-button" onclick="toggleBottomBar()">üîΩ</button>
  <div class="settings-panel" id="settingsPanel">
    <button onclick="toggleAnimation()">Pause Animation</button>
    <button class="close-button" onclick="toggleSettingsPanel()">Close</button>
  </div>
  <script>
    let isLoading = false; // Global flag to prevent overlapping buttonClick calls

    // Detect if Impact font is unavailable
    function detectImpactFont() {
      const testString = "Test123";
      const span = document.createElement('span');
      span.style.fontSize = '100px';
      span.style.visibility = 'hidden';
      span.style.position = 'absolute';
      span.textContent = testString;
      document.body.appendChild(span);

      span.style.fontFamily = 'Impact';
      const impactWidth = span.offsetWidth;

      span.style.fontFamily = 'monospace';
      const fallbackWidth = span.offsetWidth;

      document.body.removeChild(span);

      if (impactWidth === fallbackWidth) {
        document.body.classList.add('no-impact');
      }
    }

    // Button click handler for iframe and selection
    function buttonClick(buttonNumber) {
      if (isLoading) return; // Prevent overlapping calls
      isLoading = true;

      const loadingScreen = document.getElementById('loadingScreen');
      const progressCircle = document.querySelector('.progress-circle circle');
      const iframe = document.getElementById('contentIframe');
      const buttons = document.querySelectorAll('.theme-button');
      const homeContainer = document.querySelector('.home-container');
      const minDuration = 750;
      const maxDuration = 1000;
      const duration = Math.random() * (maxDuration - minDuration) + minDuration;

      // Disable buttons during transition
      buttons.forEach(btn => btn.classList.add('disabled'));

      // Clear all selected states first
      buttons.forEach(btn => btn.classList.remove('selected'));

      // Set new selected state
      buttons[buttonNumber - 1].classList.add('selected');

      // Show/hide home container and iframe
      if (buttonNumber === 1) {
        iframe.style.display = 'none';
        homeContainer.classList.remove('hidden');
        console.log('Home button clicked, showing background and home elements');
      } else {
        const sources = {
          2: 'https://szvyflix-proxied.vercel.app/',
          3: 'https://example.com/page3',
          4: 'https://example.com/page4',
          5: 'https://example.com/page5',
          6: 'https://example.com/page6',
          7: 'https://example.com/page7',
          8: 'https://example.com/page8',
          9: 'https://example.com/page9',
          10: 'https://example.com/page10'
        };
        const sourceUrl = sources[buttonNumber];
        if (sourceUrl) {
          iframe.src = sourceUrl;
          iframe.style.display = 'block';
          homeContainer.classList.add('hidden');
          console.log(`Button ${buttonNumber} clicked, loading ${sourceUrl}`);
        } else {
          console.error(`No URL defined for button ${buttonNumber}`);
          iframe.style.display = 'none';
          homeContainer.classList.remove('hidden');
          buttons[buttonNumber - 1].classList.remove('selected');
          buttons[0].classList.add('selected');
          isLoading = false;
          buttons.forEach(btn => btn.classList.remove('disabled'));
          return; // Exit early to prevent loading screen
        }
      }

      // Show loading screen
      loadingScreen.style.display = 'flex';
      loadingScreen.style.animation = 'none';
      progressCircle.style.animation = 'none';
      loadingScreen.offsetHeight; // Force reflow
      loadingScreen.style.animation = `loadingFade ${duration}ms linear forwards`;
      progressCircle.style.animation = `progressFill ${duration}ms linear forwards`;

      setTimeout(() => {
        buttons.forEach(btn => btn.classList.remove('disabled'));
        loadingScreen.style.display = 'none';
        isLoading = false; // Allow new button clicks
      }, duration);
    }

    // Add click effect
    document.querySelectorAll('.theme-button').forEach(button => {
      button.addEventListener('click', function(e) {
        const rect = this.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        const effect = document.createElement('span');
        effect.className = 'click-effect';
        effect.style.left = `${x}px`;
        effect.style.top = `${y}px`;
        this.appendChild(effect);
        
        effect.addEventListener('animationend', () => {
          effect.remove();
        });
      });
    });

    // Cookie functions
    function setCookie(name, value, days) {
      const date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      const expires = "expires=" + date.toUTCString();
      document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    function getCookie(name) {
      const nameEQ = name + "=";
      const ca = document.cookie.split(';');
      for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    // Toggle settings panel
    function toggleSettingsPanel() {
      const panel = document.getElementById('settingsPanel');
      const pauseButton = panel.querySelector('button');
      const isVisible = !panel.classList.contains('hidden');

      if (isVisible) {
        panel.classList.add('hidden');
        setTimeout(() => {
          panel.style.display = 'none';
        }, 300);
      } else {
        panel.style.display = 'flex';
        panel.offsetHeight;
        panel.classList.remove('hidden');
      }

      const background = document.querySelector('.background');
      pauseButton.textContent = background.classList.contains('paused') ? 'Resume Animation' : 'Pause Animation';
    }

    // Toggle bottom bar, hover area, and fullscreen button
    function toggleBottomBar() {
      const bottomBar = document.querySelector('.bottom-bar');
      const hoverArea = document.querySelector('.hover-area');
      const fullscreenButton = document.querySelector('.fullscreen-button');
      const toggleButton = document.querySelector('.toggle-bar-button');
      const isVisible = !bottomBar.classList.contains('hidden');
      
      if (isVisible) {
        bottomBar.classList.add('hidden');
        hoverArea.classList.add('hidden');
        if (!document.fullscreenElement) {
          fullscreenButton.classList.remove('hidden');
          fullscreenButton.style.display = 'flex';
        }
        toggleButton.textContent = 'üîº';
        if (!toggleButton.textContent.match(/üîº/)) {
          toggleButton.textContent = '‚ñ≤';
        }
        setTimeout(() => {
          bottomBar.style.display = 'none';
          hoverArea.style.display = 'none';
        }, 300);
      } else {
        bottomBar.style.display = 'flex';
        hoverArea.style.display = 'block';
        fullscreenButton.style.display = 'none';
        bottomBar.offsetHeight;
        hoverArea.offsetHeight;
        bottomBar.classList.remove('hidden');
        hoverArea.classList.remove('hidden');
        fullscreenButton.classList.add('hidden');
        toggleButton.textContent = 'üîΩ';
        if (!toggleButton.textContent.match(/üîΩ/)) {
          toggleButton.textContent = '‚ñº';
        }
      }
    }

    // Toggle fullscreen mode
    function toggleFullscreen() {
      const fullscreenButton = document.querySelector('.fullscreen-button');
      if (document.fullscreenElement) {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.mozCancelFullScreen) {
          document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      } else {
        if (document.documentElement.requestFullscreen) {
          document.documentElement.requestFullscreen();
        } else if (document.documentElement.mozRequestFullScreen) {
          document.documentElement.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullscreen) {
          document.documentElement.webkitRequestFullscreen();
        } else if (document.documentElement.msRequestFullscreen) {
          document.documentElement.msRequestFullscreen();
        }
        fullscreenButton.style.display = 'none';
        fullscreenButton.classList.add('hidden');
      }
    }

    // Update fullscreen button visibility on fullscreen change
    document.addEventListener('fullscreenchange', () => {
      const fullscreenButton = document.querySelector('.fullscreen-button');
      const bottomBar = document.querySelector('.bottom-bar');
      if (!document.fullscreenElement && bottomBar.classList.contains('hidden')) {
        fullscreenButton.style.display = 'flex';
        fullscreenButton.classList.remove('hidden');
      } else {
        fullscreenButton.style.display = 'none';
        fullscreenButton.classList.add('hidden');
      }
    });
    document.addEventListener('mozfullscreenchange', () => {
      const fullscreenButton = document.querySelector('.fullscreen-button');
      const bottomBar = document.querySelector('.bottom-bar');
      if (!document.fullscreenElement && bottomBar.classList.contains('hidden')) {
        fullscreenButton.style.display = 'flex';
        fullscreenButton.classList.remove('hidden');
      } else {
        fullscreenButton.style.display = 'none';
        fullscreenButton.classList.add('hidden');
      }
    });
    document.addEventListener('webkitfullscreenchange', () => {
      const fullscreenButton = document.querySelector('.fullscreen-button');
      const bottomBar = document.querySelector('.bottom-bar');
      if (!document.fullscreenElement && bottomBar.classList.contains('hidden')) {
        fullscreenButton.style.display = 'flex';
        fullscreenButton.classList.remove('hidden');
      } else {
        fullscreenButton.style.display = 'none';
        fullscreenButton.classList.add('hidden');
      }
    });
    document.addEventListener('MSFullscreenChange', () => {
      const fullscreenButton = document.querySelector('.fullscreen-button');
      const bottomBar = document.querySelector('.bottom-bar');
      if (!document.fullscreenElement && bottomBar.classList.contains('hidden')) {
        fullscreenButton.style.display = 'flex';
        fullscreenButton.classList.remove('hidden');
      } else {
        fullscreenButton.style.display = 'none';
        fullscreenButton.classList.add('hidden');
      }
    });

    // Toggle animation and save state
    function toggleAnimation() {
      const background = document.querySelector('.background');
      const pauseButton = document.querySelector('#settingsPanel button');
      const isPaused = background.classList.contains('paused');
      
      if (isPaused) {
        background.classList.remove('paused');
        pauseButton.textContent = 'Pause Animation';
        setCookie('animationPaused', 'false', 30);
      } else {
        background.classList.add('paused');
        pauseButton.textContent = 'Resume Animation';
        setCookie('animationPaused', 'true', 30);
      }
    }

    // Initialize loading screen and other features
    window.onload = function() {
      const loadingScreen = document.getElementById('loadingScreen');
      const progressCircle = document.querySelector('.progress-circle circle');
      const minDuration = 1000;
      const maxDuration = 2500;
      const duration = Math.random() * (maxDuration - minDuration) + minDuration;
      
      loadingScreen.style.animationDuration = `${duration}ms`;
      progressCircle.style.animationDuration = `${duration}ms`;
      
      loadingScreen.addEventListener('animationend', () => {
        loadingScreen.style.display = 'none';
        const iframe = document.getElementById('contentIframe');
        const buttons = document.querySelectorAll('.theme-button');
        const homeContainer = document.querySelector('.home-container');
        buttons.forEach(btn => btn.classList.remove('selected'));
        buttons[0].classList.add('selected');
        iframe.style.display = 'none';
        homeContainer.classList.remove('hidden');
        console.log('Initial load complete, showing Home background and elements');
      });

      const animationPaused = getCookie('animationPaused');
      const background = document.querySelector('.background');
      
      if (animationPaused === 'true') {
        background.classList.add('paused');
      } else {
        background.classList.remove('paused');
      }

      const toggleButton = document.querySelector('.toggle-bar-button');
      toggleButton.textContent = 'üîΩ';
      if (!toggleButton.textContent.match(/üîΩ/)) {
        toggleButton.textContent = '‚ñº';
      }

      detectImpactFont();
    };
  </script>
</body>
</html>
