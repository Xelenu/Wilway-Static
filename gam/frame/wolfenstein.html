<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <title>Wolfenstein</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    canvas {
      display: block;
      background-color: black;
      width: 100vw;
      height: 100vh;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }
  </style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
  const canvas = document.getElementById('canvas');

  // Resize the canvas resolution to match display size
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  window.addEventListener('resize', resizeCanvas);
  resizeCanvas(); // Initial call
</script>

<script>
  function resumeSDLAudioContext() {
    SDL.audioContext.resume().then(() => {
      console.log('Playback resumed successfully');
    });
  }

  (function () {
    const originalSetTimeout = window.setTimeout;
    let totalTimers = 0;
    window.setTimeout = function (fn, time) {
      totalTimers++;
      if ((totalTimers > 1 && totalTimers < 100) || totalTimers % 100 === 0) {
        console.log('totalTimers =', totalTimers);
      }
      return originalSetTimeout(function (...args) {
        totalTimers--;
        return fn.apply(this, args);
      }, time);
    };
  })();
</script>

<script>
  var Module = {
    preRun: [],
    postRun: [],
    print: function (text) { console.log(text); },
    printErr: function (text) { console.error(text); },
    canvas: (function () {
      const canvas = document.getElementById('canvas');
      canvas.addEventListener('webglcontextlost', function (e) {
        alert('WebGL context lost. Reload the page.');
        e.preventDefault();
      }, false);
      return canvas;
    })(),
    setStatus: function (text) {
      console.log('[status]', text);
    },
    totalDependencies: 0,
    monitorRunDependencies: function (left) {
      this.totalDependencies = Math.max(this.totalDependencies, left);
      Module.setStatus(
        left
          ? 'Preparing... (' + (this.totalDependencies - left) + '/' + this.totalDependencies + ')'
          : 'All downloads complete.'
      );
    }
  };

  Module.setStatus('Downloading...');
  window.onerror = function (event) {
    Module.setStatus('Exception thrown, see console');
    Module.setStatus = function (text) {
      text && Module.printErr('[post-exception status] ' + text);
    };
  };
</script>

<script async src="/core/gam-scripts/wolfenstein/Chocolate-Wolfenstein-3D.js"></script>

</body>
</html>
